{"version":3,"sources":["noImage.png","firebase.js","SubmitButton.js","translate.js","ChatForm.js","RecentMessages.js","FriendSelector.js","AlertMessage.js","AddFriendButton.js","ChatPage.js","SignInPage.js","LanguageSelector.js","SignUp.js","GuestSignIn.js","Header.js","Footer.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","SubmitButton","props","className","type","label","translatorApiKey","translate","text","sender","reciever","nickname","database","ref","once","then","snapshot","language","val","axios","method","url","responseType","params","key","format","lang","data","join","dbRef","translatedMessage","Date","now","toString","split","splice","push","set","catch","error","console","log","ChatForm","handleSubmit","event","preventDefault","message","state","handleChange","setState","target","value","action","onSubmit","this","name","id","cols","rows","onChange","disabled","required","Component","RecentMessages","messages","map","index","time","FriendSelector","onClick","function","currentTarget","uid","imgUrl","src","alt","noImage","deleteFunction","AlertMessage","functionToClose","resend","auth","currentUser","sendEmailVerification","AddFriendButton","addFriend","usersId","openedChats","includes","userNickname","databaseData","arrayPromises","user","userRef","Promise","all","values","filter","conversationArray","conversationData","conversation","length","userId","update","errorMessage","closeAlert","on","openedChatsData","chat","htmlFor","ChatPage","select","handle","messagesData","userEmail","chattingWithName","chattingWithUid","off","deleteConversation","indexToDelete","friends","remove","languageToTransalte","result","friend","SignInPage","signIn","signInWithEmailAndPassword","email","password","errorCode","code","LanguageSelector","languages","ui","languageObject","langs","codeLangs","sort","a","b","selected","SignUp","getLanguage","createUser","createUserWithEmailAndPassword","updateProfile","displayName","signedUp","maxLength","GuestSignUp","signInGuest","setPersistence","Auth","Persistence","NONE","signInAnonymously","guestNumber","signOut","Header","signedIn","Footer","App","getLanguageFromSignUp","alert","selectOption","optionSelected","verified","onAuthStateChanged","emailVerified","guestNumberData","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d996ab4a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/noImage.8c35acc9.png\";","import firebase from \"firebase/app\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBlKx7tzmawALlymKEkgJZiLdY4IE2VXHg\",\r\n    authDomain: \"translatechat-6c518.firebaseapp.com\",\r\n    databaseURL: \"https://translatechat-6c518.firebaseio.com\",\r\n    projectId: \"translatechat-6c518\",\r\n    storageBucket: \"translatechat-6c518.appspot.com\",\r\n    messagingSenderId: \"187513714020\",\r\n    appId: \"1:187513714020:web:aa171bc1b36018a37d3671\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase\r\n","import React from \"react\";\r\n\r\nfunction SubmitButton(props) {\r\n    return (\r\n        <button className=\"submitButton\" type=\"submit\">{props.label}</button>\r\n    )\r\n}\r\n\r\nexport default SubmitButton;","import axios from \"axios\";\r\nimport firebase from \"firebase\";\r\n\r\nconst translatorApiKey = \"trnsl.1.1.20191120T174117Z.30abf07a083257c3.606e1a38fc565562205063e541cb970657ab2600\";\r\n\r\nfunction translate(text,sender,reciever,nickname) {\r\n\r\n\r\n    firebase.database().ref(`${reciever}/settings/language`).once(\"value\").then((snapshot)=>{\r\n        \r\n        const language = snapshot.val();       \r\n\r\n        axios({\r\n            method:\"get\",\r\n            url: \"https://translate.yandex.net/api/v1.5/tr.json/translate\",\r\n            responseType: \"json\",\r\n            params: {\r\n                key: translatorApiKey,\r\n                text: text,\r\n                format: \"plain\",\r\n                lang: language,\r\n            }\r\n        }).then((data) => {\r\n            const translation = data.data.text.join(\"\");\r\n            const dbRef = firebase.database().ref(`${reciever}/chats/${sender}/messages`);\r\n            const translatedMessage = {\r\n                \"message\": text,\r\n                \"type\": \"recieved\",\r\n                \"time\": Date(Date.now().toString()).split(\" GMT\").splice(1, 1)\r\n            }\r\n            dbRef.push(translatedMessage);\r\n            \r\n\r\n            firebase.database().ref(`${reciever}/chats/${sender}/nickname`).set(nickname);\r\n\r\n        }).catch((error)=>{\r\n            console.log(error);\r\n        })\r\n\r\n    })\r\n\r\n}\r\n\r\nexport default translate;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport translate from \"./translate\"\r\n\r\n\r\nclass ChatForm extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            text:\"\"\r\n        }\r\n    }\r\n    \r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const dbRef = firebase.database().ref(`${this.props.sender}/chats/${this.props.reciever}/messages`);\r\n\r\n        const message = {\r\n            \"message\": this.state.text,\r\n            \"type\": \"sent\",\r\n            \"time\": Date(Date.now().toString()).split(\" GMT\").splice(0, 1)\r\n        }\r\n        dbRef.push(message);\r\n        \r\n        translate(this.state.text,this.props.sender,this.props.reciever,this.props.nickname);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            text: event.target.value\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"chatForm\" action=\"\" onSubmit={this.handleSubmit}>\r\n                <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\" value={this.state.text} onChange={this.handleChange} disabled={this.props.reciever?false:true} required></textarea>\r\n                <SubmitButton label=\"Send\"/>\r\n            </form>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default ChatForm;","import React from \"react\";\r\n\r\n\r\nfunction RecentMessages(props) {\r\n    return (\r\n        <div className=\"recentMessagesDiv\">\r\n            <ul className=\"recentMessages\">\r\n                {   \r\n                    props.messages.map((message, index) => {\r\n                        return (\r\n                            <li key={index} className={message.type} >\r\n                                <p className=\"time\">{message.time}</p>\r\n                                <p>{message.message}</p>\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RecentMessages;","import React from \"react\";\r\nimport noImage from \"./noImage.png\";\r\n\r\n\r\n\r\nfunction FriendSelector(props) {\r\n\r\n    const setName = function(event){\r\n        props.function(event.currentTarget.value, event.currentTarget.id);\r\n    }\r\n\r\n    const deleteConversation = (event) => {\r\n       \r\n        props.deleteFunction(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <li className=\"friendButton\">\r\n            <button onClick={setName} value={props.name} id={props.uid}>\r\n                {props.imgUrl\r\n                    ?\r\n                    <img src={props.imgUrl} alt={`A picture of ${props.name}`}/>\r\n                    :\r\n                <img src={noImage} alt={`The user has no picture`}/>\r\n            } \r\n                <p>{props.name}</p>\r\n            </button>\r\n            <button className=\"deleteButton\" onClick={deleteConversation} value={props.index}>-</button>\r\n            \r\n        </li>\r\n    )\r\n}\r\n\r\nexport default FriendSelector;","import React from \"react\";\r\nimport firebase from \"firebase\";\r\n\r\n\r\n\r\nfunction AlertMessage(props) {\r\n    \r\n    const close = () => {\r\n        props.functionToClose();\r\n        console.log(props);\r\n    }\r\n\r\n    const resendEmail = () => {\r\n        firebase.auth().currentUser.sendEmailVerification();\r\n    }\r\n\r\n    return(\r\n        <div className=\"alert\">\r\n            <h2>{props.message}</h2>\r\n            <div>\r\n                <button onClick={close}>Ok</button>\r\n                {props.resend\r\n                    ?\r\n                    <button onClick={resendEmail}>Resend email</button>\r\n                    :\r\n                    \"\"\r\n                }\r\n            \r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AlertMessage;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"./firebase\";\r\nimport AlertMessage from \"./AlertMessage\";\r\n\r\nclass AddFriendButton extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            nickname:null,\r\n            openedChats: [],\r\n            error: false,\r\n            errorMessage:\"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        // Getting the reference of all the opened chats of the user\r\n            const friendsReference = firebase.database().ref(`${this.props.userId}/chats`)\r\n\r\n        // Seting up listener in order to get any changes on the database of incoming conversations.\r\n\r\n        \r\n\r\n            friendsReference.on(\"value\", (snapshot) => {\r\n                const openedChats = [];\r\n                const openedChatsData = snapshot.val();\r\n                \r\n                for (let chat in openedChatsData) {\r\n               \r\n                    openedChats.push(openedChatsData[chat].nickname);\r\n                }\r\n                \r\n                this.setState({\r\n                    openedChats:openedChats\r\n                })\r\n\r\n            })\r\n\r\n    }\r\n    \r\n    addFriend = (event) => {\r\n        event.preventDefault()\r\n        const userList = [];\r\n        const usersId = []\r\n\r\n        // Checking if theres no opened conversations opened with that user and that the user isnt trying to start a conversation with itself\r\n        \r\n        if(this.state.openedChats.includes(this.state.nickname) || (this.state.nickname === this.props.userNickname)){\r\n            console.log(\"You already have an opened chat with\", this.state.nickname);\r\n        }else{\r\n\r\n            const databaseRef = firebase.database().ref();\r\n        \r\n            databaseRef.once(\"value\").then((snapshot) => {\r\n                \r\n                const databaseData = snapshot.val()\r\n                const arrayPromises = []\r\n                for (let user in databaseData) {\r\n                    if (user !== \"generalConfig\") {\r\n                        \r\n                        usersId.push(user);\r\n                        const userRef = firebase.database().ref(`${user}/settings/nickname`);\r\n                        arrayPromises.push(userRef.once(\"value\"));\r\n                        \r\n                    }\r\n                }\r\n        \r\n                // Using promise.all to make sure to get all values before doing anything\r\n    \r\n                Promise.all(arrayPromises).then((values) => {\r\n                    values.filter((value, index) => {\r\n                        if (value.val() === this.state.nickname) {\r\n                            console.log(\"found\");\r\n                            \r\n\r\n                            // If found check th other user doesnt have more than 5 conversations\r\n\r\n                            firebase.database().ref(`${usersId[index]}/chats`).once(\"value\").then((snapshot)=>{\r\n                                const conversationArray = [];\r\n                                const conversationData = snapshot.val();\r\n                                for(let conversation in conversationData){\r\n                                    conversationArray.push(conversation);\r\n                                }\r\n                                if(conversationArray.length <=5){\r\n                                    firebase.database().ref(`${this.props.userId}/chats`).update({\r\n                                        [usersId[index]]: {\r\n                                            nickname: this.state.nickname,\r\n                                            messages:\"\"\r\n                                        }\r\n                                    })\r\n            \r\n                                    firebase.database().ref(`${usersId[index]}/chats`).update({\r\n                                        [this.props.userId]: {\r\n                                            nickname: this.props.userNickname,\r\n                                            messages: \"\"\r\n                                        }\r\n                                    })\r\n\r\n                                }else{\r\n                                    this.setState({\r\n                                        errorMessage: \"The user you are trying to reach has already 5 conversations opened.\",\r\n                                        error: true\r\n                                    });\r\n                                }\r\n                            })\r\n                            \r\n                        } else {\r\n                            this.setState({\r\n                                errorMessage: \"The user you are searching for doesn't exist\",\r\n                                error: true\r\n                            });\r\n                        }\r\n                    })\r\n                })\r\n        \r\n                \r\n            })\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    handleChange = (event) => {\r\n        this.setState({\r\n            nickname: event.target.value\r\n        })\r\n    }\r\n\r\n    closeAlert = () => {\r\n        this.setState({\r\n            error:false\r\n        })\r\n    }\r\n\r\n    \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.error\r\n                    ?\r\n                    <AlertMessage message={this.state.errorMessage} functionToClose={this.closeAlert} resend={false}/>\r\n                    :\r\n                    \"\"\r\n                }\r\n                \r\n                <form className=\"addFriendBar\" action=\"\" onSubmit={this.addFriend}>\r\n                    <label htmlFor=\"nickname\">Enter nickname of a friend to start a conversation:</label>\r\n                    <input type=\"text\" id=\"nickname\" value={this.state.nickname} onChange={this.handleChange} />\r\n                    <SubmitButton label=\"Add\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default AddFriendButton","import React, { Component } from \"react\";\r\n\r\nimport firebase from \"./firebase\";\r\nimport ChatForm from \"./ChatForm\";\r\nimport RecentMessages from \"./RecentMessages\";\r\nimport FriendSelector from \"./FriendSelector\";\r\nimport AddFriendButton from \"./AddFriendButton\";\r\n\r\n\r\n\r\nclass ChatPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userId: props.userId,\r\n            userNickname: props.name,\r\n            userEmail: null,\r\n            chattingWithName: null,\r\n            chattingWithUid:null,\r\n            languageToTransalte: null,\r\n            friends: [],\r\n            messages: [],\r\n            language: \"\",\r\n        }\r\n    }\r\n\r\n  \r\n\r\n    componentDidMount() {\r\n        \r\n        if (this.state.chattingWithUid !== null) {\r\n\r\n            const languageReference = firebase.database().ref(`${this.state.chattingWithUid}/settings`);\r\n            languageReference.once(\"value\").then((result) => {\r\n                this.setState({\r\n                    language: result.val().language\r\n                })\r\n            })\r\n        }\r\n\r\n        // Getting the reference of all the opened chats of the user\r\n            const friendsReference = firebase.database().ref(`${this.state.userId}/chats`)\r\n\r\n        // Seting up listener in order to get any changes on the database of incoming conversations.\r\n\r\n            friendsReference.on(\"value\", (snapshot) => {\r\n                \r\n                const openedChatsData = snapshot.val();\r\n                const openedChats = [];\r\n                \r\n                for (let chat in openedChatsData) {\r\n                    console.log(openedChatsData[chat])\r\n                    openedChats.push({ uid: chat, name: openedChatsData[chat].nickname, });\r\n                }\r\n\r\n                \r\n\r\n                // Rendering informaion on page\r\n                this.setState({\r\n                    friends: openedChats\r\n                })\r\n\r\n            })\r\n\r\n        // }\r\n\r\n    }\r\n\r\n    \r\n    \r\n    // Getting the messages between the user and the selected other user.\r\n    select = (name,uid) => {\r\n\r\n        const handle = snapshot => {\r\n            \r\n            const messages = [];\r\n            const messagesData = snapshot.val();\r\n            if(messagesData != null){\r\n                if (!messagesData.length) {\r\n                    for (let message in messagesData) {\r\n                    \r\n                        messages.push(messagesData[message]);\r\n                    } \r\n                } else {\r\n                    messages.push(messagesData);\r\n                }\r\n\r\n                console.log(messages);\r\n\r\n            }\r\n            \r\n\r\n            this.setState({\r\n                userId: this.props.userId,\r\n                userEmail: this.props.userEmail,\r\n                messages: messages,\r\n                chattingWithName: name,\r\n                chattingWithUid: uid,\r\n                language:\"\",\r\n            })\r\n        }\r\n        console.log(`${this.state.userId}/${uid}`);\r\n        const dbRef = firebase.database().ref(`${this.state.userId}/chats/${uid}/messages`);\r\n        dbRef.off(\"value\", handle);\r\n        dbRef.on(\"value\", handle);\r\n\r\n    }\r\n\r\n    deleteConversation = (indexToDelete) => {\r\n        \r\n        firebase.database().ref(`${this.state.userId}/chats/${this.state.friends[indexToDelete].uid}`).remove().then(()=>{\r\n            console.log(\"deleted\");\r\n        });\r\n\r\n        firebase.database().ref(`${this.state.friends[indexToDelete].uid}/chats/${this.state.userId}`).remove().then(()=>{\r\n            console.log(\"deleted\");\r\n        });\r\n    }\r\n        \r\n    render() {\r\n        return (\r\n            <div>\r\n                \r\n                \r\n                <div className=\"chatPageContainer\">\r\n\r\n                    \r\n                    \r\n                    <div className=\"listOfFriends\">\r\n                        {/* Only show the add conversation(friend) button if there are less than 5 active conversations */}\r\n                    {this.state.friends.length <= 5\r\n                        ?\r\n                        <AddFriendButton userId={this.state.userId} userNickname={this.state.userNickname} />\r\n                        :\r\n                        null\r\n                        }\r\n                        <ul>\r\n                            {this.state.friends.map((friend, index) => {\r\n                                return (\r\n                                    <FriendSelector key={index} uid={friend.uid} name={friend.name} imgUrl={friend.imgUrl ? friend.imgUrl : null} userNickname={this.state.userNickname} function={this.select} index={index} deleteFunction={this.deleteConversation}/>\r\n                                )\r\n                            })}\r\n\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"messagesAndTextContainer\">\r\n                        <h2>{this.state.chattingWithName\r\n                            ?\r\n                            `Chat between ${this.props.name} and ${this.state.chattingWithName}`\r\n                            :\r\n                            `Hi ${this.props.name}! Start chatting without worrying about language barrier! `}</h2>\r\n                        <RecentMessages messages={this.state.messages} />\r\n                        <ChatForm  language={this.state.language} sender={this.state.userId} reciever={this.state.chattingWithUid} nickname={this.state.userNickname}/>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ChatPage;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\n\r\n\r\nclass SignInPage extends Component{\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n        }\r\n    }\r\n    \r\n    handleChange = (event) => {\r\n        \r\n        this.setState({\r\n            [event.target.id]:event.target.value\r\n        })\r\n    }\r\n\r\n    \r\n    \r\n    signIn = (event) => {\r\n        event.preventDefault();\r\n        \r\n        firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then((result) => {\r\n            \r\n            \r\n        }).catch(function (error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            console.log(errorCode);\r\n            console.log(errorMessage);\r\n            // ...\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        \r\n        return (\r\n            \r\n            <form className=\"signIn\" action=\"\" onSubmit={this.signIn}>\r\n                <h2>Sign In</h2>\r\n                <label htmlFor=\"email\">Enter email</label>\r\n                <input type=\"email\" id=\"email\" onChange={this.handleChange} value={this.state.email} required />\r\n                <label htmlFor=\"password\">Enter password</label>\r\n                <input type=\"password\" id=\"password\" onChange={this.handleChange} value={this.state.password} required/>\r\n                <SubmitButton label=\"Sign in\"/>\r\n            </form>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\nexport default SignInPage;","import React, { Component } from \"react\";\r\n\r\nimport axios from \"axios\";\r\n\r\n\r\nclass LanguageSelector extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            languages: [],\r\n            \r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios({\r\n            method: \"get\",\r\n            url: \"https://translate.yandex.net/api/v1.5/tr.json/getLangs\",\r\n            responseType: \"json\",\r\n            params: {\r\n                key: \"trnsl.1.1.20191120T174117Z.30abf07a083257c3.606e1a38fc565562205063e541cb970657ab2600\",\r\n                ui: \"en\"\r\n                // text: text,\r\n                // format: \"plain\",\r\n                // lang: language,\r\n            }\r\n        }).then((data) => {\r\n            // const translation = data.data.text.join(\"\");\r\n            // const dbRef = firebase.database().ref(`Carlos/${user}`);\r\n            // dbRef.push(translation);\r\n            \r\n            const languageObject = data.data.langs;\r\n            let languages = [];\r\n            let codeLangs = [];\r\n            for (let lang in languageObject) {\r\n                languages.push({\r\n                    name: languageObject[lang],\r\n                    code: lang\r\n                })\r\n                \r\n            }\r\n            languages = languages.sort();\r\n            codeLangs = codeLangs.sort();\r\n\r\n            languages = languages.sort(function (a, b) {\r\n                return ((a.name < b.name) ? -1 : ((a.name == b.name) ? 0 : 1));\r\n            });\r\n            this.setState({\r\n                languages: languages,\r\n                \r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n            <label htmlFor=\"language\">Select your language:  </label>\r\n                <select name=\"language\" id=\"language\" onChange={this.props.function} required>\r\n                {this.state.languages.map((language) => {\r\n                return <option id={language.name} value={language.code} selected={language.name===\"English\"?\"selected\":\"\"}>{language.name} </option>\r\n                })}\r\n            </select>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default LanguageSelector;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport LanguageSelector from \"./LanguageSelector\";\r\n\r\n\r\nclass SignUp extends Component{\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            name: \"\",\r\n            language: \"en\",\r\n            signedUp:false\r\n        }\r\n    }\r\n\r\n    getLanguage = (event) => {\r\n        console.log(event.target.value);\r\n        this.setState({\r\n            language: event.target.value,\r\n            \r\n        })\r\n    }\r\n\r\n    \r\n\r\n    createUser = (event) => {\r\n        event.preventDefault();\r\n\r\n        firebase.auth().createUserWithEmailAndPassword(this.state.email, this.state.password).then((result) => {\r\n\r\n            // make sure the user can not start with guest if using nickname to store chats\r\n\r\n            const data = {\r\n                \r\n                    \"chats\": false,\r\n                    \"settings\": {\r\n                        \"language\": this.state.language,\r\n                        \"nickname\": this.state.name,\r\n                        \"email\": this.state.email,\r\n                    }\r\n                \r\n            }\r\n\r\n            console.log(data,\"here\");\r\n            console.log(\"user\",result.user.uid);\r\n\r\n            firebase.database().ref(`${result.user.uid}`).update(data);\r\n\r\n            result.user.sendEmailVerification().then(function () {\r\n                // Email sent.\r\n                \r\n            }).catch(function (error) {\r\n                // An error happened.\r\n                console.log(error);\r\n            });\r\n\r\n            \r\n\r\n            \r\n            \r\n            // result.user.language = this.state.language;\r\n\r\n            result.user.updateProfile({\r\n                displayName: this.state.name,\r\n                language:this.state.language\r\n            })\r\n\r\n            // firebase.database().ref(`user.user.uid/`).update(data);\r\n            \r\n\r\n\r\n        }).catch(function (error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            console.log(errorMessage);\r\n            // ...\r\n        });\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            [event.target.id]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n\r\n            <form className=\"signUp\" action=\"\" onSubmit={this.createUser}>\r\n                <h2>Sign up</h2>\r\n                <label htmlFor=\"name\">Enter nickname</label>\r\n                <input type=\"text\" id=\"name\" maxLength={10} onChange={this.handleChange} value={this.state.name} required />\r\n                <label htmlFor=\"email\">Enter email</label>\r\n                <input type=\"email\" id=\"email\" onChange={this.handleChange} value={this.state.email} required />\r\n                <label htmlFor=\"password\">Enter password</label>\r\n                <input type=\"password\" id=\"password\" onChange={this.handleChange} value={this.state.password} required />\r\n                <LanguageSelector function={this.getLanguage} />\r\n                <SubmitButton label=\"Sign up\" />\r\n            </form>\r\n        )\r\n    };\r\n\r\n}\r\n\r\n\r\nexport default SignUp;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport LanguageSelector from \"./LanguageSelector\"\r\n\r\n\r\nclass GuestSignUp extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            name: \"\",\r\n            language: \"en\",\r\n            userId: \"\"\r\n        }\r\n    }\r\n\r\n    signInGuest = (event) => {\r\n        event.preventDefault();\r\n\r\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE)\r\n            .then(() => {\r\n                // Existing and future Auth states are now persisted in the current\r\n                // session only. Closing the window would clear any existing state even\r\n                // if a user forgets to sign out.\r\n                // ...\r\n                // New sign-in will be persisted with session persistence.\r\n                return firebase.auth().signInAnonymously().then((data) => {\r\n                    \r\n                    const userId = data.user.uid;\r\n\r\n                    const guestNumberData = firebase.database().ref(\"/generalConfig\");\r\n                    guestNumberData.once(\"value\").then((value) => {\r\n                        this.setState({\r\n                            \r\n                            userId: userId,\r\n                         \r\n                        })\r\n\r\n                        console.log(value.val().guestNumber);\r\n                  \r\n                        \r\n                        const data = {\r\n\r\n                            \"chats\": false,\r\n                            \"settings\": {\r\n                                \"language\": this.state.language,\r\n                                \"nickname\": `guest${value.val().guestNumber}`,\r\n                                \"email\": null,\r\n                                \"isGuest\": true\r\n                            }\r\n\r\n                        }\r\n\r\n                        firebase.database().ref(`${userId}`).update(data);\r\n\r\n                        \r\n\r\n                    })\r\n\r\n                }).catch(function (error) {\r\n                    // Handle Errors here.\r\n                    var errorCode = error.code;\r\n                    var errorMessage = error.message;\r\n                    console.log(errorMessage);\r\n                    // ...\r\n                });\r\n            })\r\n            .catch(function (error) {\r\n                // Handle Errors here.\r\n                var errorCode = error.code;\r\n                var errorMessage = error.message;\r\n            });\r\n\r\n\r\n        \r\n\r\n       \r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            [event.target.id]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    getLanguage = (event) => {\r\n        console.log(event.target.value);\r\n        this.setState({\r\n            language: event.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <form className=\"guestSignIn\" action=\"\" onSubmit={this.signInGuest}>\r\n                <h2>Sign up Guest</h2>\r\n                <p>Signing in as a guest means you wont be able to select your nickname and will only be able to  get access to your conversations while logged in. If your refresh the page you will automatically logged out.</p>\r\n                <LanguageSelector function={this.getLanguage} />\r\n                <SubmitButton label=\"Sign in\" />\r\n                \r\n            </form>\r\n        )\r\n    };\r\n\r\n}\r\n\r\n\r\nexport default GuestSignUp;","import React from \"react\";\r\nimport firebase from \"firebase\"\r\n\r\nconst signOut = () => {\r\n    firebase.auth().signOut();\r\n    }\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <header>\r\n            <h1>No Barriers Chat!</h1>\r\n            {props.signedIn\r\n                ?\r\n                <nav>\r\n                    <button onClick={signOut}>Sign Out</button>\r\n                    <button>Settings</button>\r\n                </nav>\r\n                :\r\n                \"\"\r\n            }\r\n            \r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer>\r\n            <p>Made by Juan Acaiturri Copyright © 2019</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React, { Component } from 'react';\nimport './App.css';\nimport firebase from \"./firebase\";\nimport ChatPage from \"./ChatPage\";\nimport SignInPage from \"./SignInPage\";\nimport SignUp from './SignUp';\nimport GuestSignUp from './GuestSignIn';\nimport AlertMessage from \"./AlertMessage\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\n\n\n\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      signedIn: false,\n      userId: null,\n      userEmail: null,\n      name: null,\n      language: null,\n      verified: null,\n      alert: false,\n      optionSelected: \"signIn\"\n    }\n  }\n\n  \n\n  componentDidMount() {\n    \n    firebase.auth().onAuthStateChanged((user) => {\n      if (user && user.emailVerified) {\n        \n        this.setState({\n          signedIn: true,\n          userId: user.uid,\n          name: user.displayName,\n          email: user.email,\n          language: \"\"\n        })\n        \n      }else if(user && !user.emailVerified && user.email){\n        this.setState({\n          alert: true\n        })\n        // In case the user sign in as guest\n      } else if (user && user.email === null) {\n        const guestNumberData = firebase.database().ref(\"/generalConfig\");\n        \n        guestNumberData.once(\"value\").then((snapshot) => {\n          this.setState({\n            signedIn: true,\n            userId: user.uid,\n            email: null,\n            name: `guest${snapshot.val().guestNumber}`\n          })\n\n          guestNumberData.update({\n            guestNumber: snapshot.val().guestNumber + 1\n          });\n          \n        });\n        \n        \n\n\n      } else {\n        // console.log(user);\n        this.setState({\n          signedIn: false,\n          userId: null\n        })\n      }\n    })\n  }\n\n  getLanguageFromSignUp = (language) => {\n    this.setState({\n      language: language\n    })\n  }\n\n  closeAlert = () => {\n    this.setState({\n      alert: false\n    })\n\n    console.log(this.state)\n  }\n\n  selectOption = (event) => {\n    this.setState({\n      optionSelected:event.target.value\n    })\n  }\n\n  render() {\n\n    return (\n      \n      <div>\n        <Header signedIn={this.state.signedIn} />\n        <main>\n          {this.state.signedIn\n            ?\n            \n            <ChatPage userId={this.state.userId} name={this.state.name} language={this.state.language}/>\n            :\n            <div className=\"options\">\n              {this.state.alert\n                ?\n                <AlertMessage functionToClose={this.closeAlert} message=\"Please verify your email and refresh after!\" resend={true} />\n                :\n                \"\"}\n              <div className=\"optionsButtons\">\n                <button onClick={this.selectOption} value=\"signIn\" className={this.state.optionSelected === \"signIn\" ? \"\" : \"inactive\"}>Sign In</button>\n                <button onClick={this.selectOption} value=\"signUp\" className={this.state.optionSelected === \"signUp\" ? \"\" : \"inactive\"}>Sign Up</button>\n                <button onClick={this.selectOption} value=\"guestSignIn\" className={this.state.optionSelected === \"guestSignIn\" ? \"\" : \"inactive\"}>Guest Sign In</button>\n              </div>\n              {this.state.optionSelected === \"signIn\"\n                ?\n                <SignInPage />\n                :\n                this.state.optionSelected === \"signUp\"\n                  ?\n                  <SignUp function={this.getLanguageFromSignUp} />\n                  :\n                  <GuestSignUp />\n\n            }\n              \n              \n              \n            </div>\n          }\n        </main>\n        <Footer/>\n        \n        \n      </div>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}