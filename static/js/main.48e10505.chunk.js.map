{"version":3,"sources":["noImage.png","firebase.js","SubmitButton.js","translate.js","GiphsSearch.js","GiphyComponent.js","ChatForm.js","RecentMessages.js","FriendSelector.js","AlertMessage.js","AddFriendButton.js","ChatPage.js","SignInPage.js","LanguageSelector.js","SignUp.js","GuestSignIn.js","Header.js","Footer.js","SettingsPage.js","Introduction.js","GoogleSignIn.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","SubmitButton","props","disabled","className","type","label","translatorApiKey","translate","text","sender","reciever","nickname","database","ref","once","then","snapshot","language","val","axios","method","url","responseType","params","key","format","lang","data","translation","join","dbRef","translatedMessage","Date","now","toString","split","splice","push","set","catch","error","console","log","GiphSearch","search","e","preventDefault","api_key","q","state","query","gifs","randomNumber","Math","floor","random","resultsToReturn","slice","setState","gifsArray","sendGif","gifUrl","currentTarget","value","altTag","id","message","closeGiphy","action","onSubmit","this","htmlFor","onChange","target","map","gif","index","images","downsized","title","onClick","src","alt","Component","GiphyComponent","toggleGiphySearch","giphyOpen","chatting","aria-hidden","ChatForm","handleSubmit","event","handleChange","name","cols","rows","placeholder","required","RecentMessages","userImg","noImage","chattingWith","messages","time","FriendSelector","function","uid","imgUrl","deleteFunction","AlertMessage","functionToClose","originalLabel","aditionalButton","aditionalFunction","aditionalLabel","AddFriendButton","addFriend","usersId","openedChats","includes","userNickname","errorMessage","databaseData","arrayPromises","user","userRef","Promise","all","values","found","forEach","conversationArray","conversationData","conversation","length","userId","update","on","openedChatsData","chat","resend","ChatPage","select","handle","messagesData","userEmail","chattingWithName","chattingWithUid","recentMessages","document","querySelector","scrollTo","top","scrollHeight","left","behavior","off","scrollIntoView","lastMessage","deleteConversation","friends","messageToDelete","remove","deleteConfirmation","languageToTransalte","result","aria-label","friend","SignInPage","signIn","functionToCall","signInAlert","auth","signInWithEmailAndPassword","email","password","userUid","getLanguage","recoverPassword","sendPasswordResetEmail","emailToRecover","emailSent","googleSignIn","functionToGetUserIsNew","userIsNewFunction","provider","GoogleAuthProvider","signInWithPopup","isUserNew","additionalUserInfo","isNewUser","forgetPassword","google","LanguageSelector","defaultValue","languages","code","SignUp","createUser","functionToCallAlert","signUpAlert","toLowerCase","substring","item","createUserWithEmailAndPassword","sendEmailVerification","updateProfile","displayName","signedUp","maxLength","minLength","GuestSignUp","signInGuest","setPersistence","Auth","Persistence","NONE","signInAnonymously","guestNumber","signOut","Header","signedIn","onClickFunction","Footer","SettingsPage","languagesSelection","applyChange","currentLanguage","filter","languageObject","closeSettings","Introduction","GoogleSignIn","setupNicknameAndLanguage","googleNicknameAlertFunction","nicknameFirstFiveLetters","currentUser","updateNicknameFunction","updateNickname","existingNicknames","setTimeout","window","location","reload","App","verified","optionSelected","languagesList","settingsStatus","verifyAlert","introduction","nicknameAlert","userIsNew","onAuthStateChanged","emailVerified","isAnonymous","guestNumberData","ui","langs","sort","a","b","Fragment","friendsVisible","aditionallabel","trueOrFalse","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.48e10505.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/noImage.8c35acc9.png\";","import firebase from \"firebase/app\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBlKx7tzmawALlymKEkgJZiLdY4IE2VXHg\",\r\n    authDomain: \"translatechat-6c518.firebaseapp.com\",\r\n    databaseURL: \"https://translatechat-6c518.firebaseio.com\",\r\n    projectId: \"translatechat-6c518\",\r\n    storageBucket: \"translatechat-6c518.appspot.com\",\r\n    messagingSenderId: \"187513714020\",\r\n    appId: \"1:187513714020:web:aa171bc1b36018a37d3671\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase\r\n","import React from \"react\";\r\n\r\nfunction SubmitButton(props) {\r\n    return (\r\n        <button disabled={props.disabled} className=\"submitButton\" type=\"submit\">{props.label}</button>\r\n    )\r\n}\r\n\r\nexport default SubmitButton;","import axios from \"axios\";\r\nimport firebase from \"firebase\";\r\n\r\nconst translatorApiKey = \"trnsl.1.1.20191120T174117Z.30abf07a083257c3.606e1a38fc565562205063e541cb970657ab2600\";\r\n\r\nfunction translate(text,sender,reciever,nickname) {\r\n\r\n\r\n    firebase.database().ref(`${reciever}/settings/language`).once(\"value\").then((snapshot)=>{\r\n        \r\n        const language = snapshot.val();       \r\n\r\n        axios({\r\n            method:\"get\",\r\n            url: \"https://translate.yandex.net/api/v1.5/tr.json/translate\",\r\n            responseType: \"json\",\r\n            params: {\r\n                key: translatorApiKey,\r\n                text: text,\r\n                format: \"plain\",\r\n                lang: language,\r\n            }\r\n        }).then((data) => {\r\n            const translation = data.data.text.join(\"\");\r\n            const dbRef = firebase.database().ref(`${reciever}/chats/${sender}/messages`);\r\n            const translatedMessage = {\r\n                \"message\": translation,\r\n                \"type\": \"recieved\",\r\n                \"time\": Date(Date.now().toString()).split(\" GMT\").splice(0, 1),\r\n                \"format\" : \"text\"\r\n            }\r\n            dbRef.push(translatedMessage);\r\n            \r\n\r\n            firebase.database().ref(`${reciever}/chats/${sender}/nickname`).set(nickname);\r\n\r\n        }).catch((error)=>{\r\n            console.log(error);\r\n        })\r\n\r\n    })\r\n\r\n}\r\n\r\nexport default translate;","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\n\r\n\r\n\r\nclass GiphSearch extends Component{\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            gifsArray: [],\r\n            query:\"\",\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        axios({\r\n            \r\n            url: \"//api.giphy.com/v1/gifs/trending\",\r\n            responseType: `json`,\r\n            method: `get`,\r\n            params: {\r\n                api_key: \"5o3FJkFysfmiqM09a9Z3ifEWL0HqHhLB\",\r\n                \r\n            }\r\n        }).then((gifs) => {\r\n            const randomNumber = Math.floor(Math.random() * 19);\r\n            const resultsToReturn = gifs.data.data.slice(randomNumber,randomNumber + 6);\r\n            this.setState({\r\n                gifsArray:resultsToReturn\r\n            })\r\n\r\n        }).catch((e) => {\r\n            console.log(\"error\")\r\n        })\r\n    }\r\n\r\n    search = (e) => {\r\n        e.preventDefault();\r\n\r\n        axios({\r\n            url: `//api.giphy.com/v1/gifs/search`,\r\n            responseType: `json`,\r\n            method: `get`,\r\n            params: {\r\n                api_key: \"5o3FJkFysfmiqM09a9Z3ifEWL0HqHhLB\",\r\n                q: this.state.query\r\n            }\r\n        }).then((gifs) => {\r\n            const randomNumber = Math.floor(Math.random() * 19);\r\n            const resultsToReturn = gifs.data.data.slice(randomNumber, randomNumber + 6);\r\n            this.setState({\r\n                gifsArray: resultsToReturn\r\n            })\r\n\r\n        }).catch((e) => {\r\n            console.log(\"error\")\r\n        })\r\n    }\r\n\r\n    sendGif= (e) => {\r\n        const gifUrl = e.currentTarget.value;\r\n        const altTag = e.currentTarget.id;\r\n    \r\n        let dbRef = firebase.database().ref(`${this.props.sender}/chats/${this.props.reciever}/messages`);\r\n\r\n        let message = {\r\n            \"message\": gifUrl,\r\n            \"type\": \"sent\",\r\n            \"time\": Date(Date.now().toString()).split(\" GMT\").splice(0, 1),\r\n            \"format\": \"gif\",\r\n            \"altTag\" : altTag\r\n        }\r\n        dbRef.push(message);\r\n\r\n        dbRef = firebase.database().ref(`${this.props.reciever}/chats/${this.props.sender}/messages`);\r\n\r\n        message = {\r\n            \"message\": gifUrl,\r\n            \"type\": \"recieved\",\r\n            \"time\": Date(Date.now().toString()).split(\" GMT\").splice(0, 1),\r\n            \"format\": \"gif\",\r\n            \"altTag\" : altTag\r\n        }\r\n        dbRef.push(message);\r\n\r\n        this.props.closeGiphy();\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"gifSearch\">\r\n                <form action=\"\" onSubmit={this.search}>\r\n                    <label htmlFor=\"gifSearchInput\">Search in GIPHY: </label>\r\n                    <input type=\"text\" id=\"gifSearchInput\" value={this.state.query} onChange={(e) => {\r\n                        this.setState({\r\n                            query: e.target.value\r\n                        })\r\n                    }}\r\n                     />\r\n                    <SubmitButton label=\"Search\"/>\r\n                    \r\n\r\n                </form>\r\n                <div>\r\n                    {this.state.gifsArray.map((gif, index) => {\r\n                        return (\r\n                            <button key={index} className=\"gif\" value={gif.images.downsized.url} id={gif.title} onClick={this.sendGif}>\r\n                                <img src={gif.images.downsized.url} alt={gif.title}/>\r\n                            </button>\r\n                        )\r\n                    })}\r\n\r\n                </div>\r\n                \r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GiphSearch\r\n\r\n","import React, { Component } from \"react\";\r\nimport GiphSearch from \"./GiphsSearch\"\r\n\r\n\r\n\r\nclass GiphyComponent extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            giphyOpen: false,\r\n            \r\n        }\r\n    }\r\n\r\n    toggleGiphySearch = () => {\r\n        this.setState({\r\n            giphyOpen: !this.state.giphyOpen\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div className=\"giphyDiv\">\r\n                <button disabled={this.props.chatting ? false : true} onClick={this.toggleGiphySearch}>Add Gif <i className=\"fas fa-image\" aria-hidden={true}></i></button>\r\n                {this.state.giphyOpen && this.props.chatting\r\n                    ?\r\n                    <GiphSearch closeGiphy={this.toggleGiphySearch} sender={this.props.sender} reciever={this.props.reciever}/>\r\n                    :\r\n                    \"\"\r\n                    \r\n                }\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default GiphyComponent","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport translate from \"./translate\"\r\nimport GiphyComponent from \"./GiphyComponent\";\r\n\r\n\r\nclass ChatForm extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            text:\"\"\r\n        }\r\n    }\r\n    \r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const dbRef = firebase.database().ref(`${this.props.sender}/chats/${this.props.reciever}/messages`);\r\n\r\n        const message = {\r\n            \"message\": this.state.text,\r\n            \"type\": \"sent\",\r\n            \"time\": Date(Date.now().toString()).split(\" GMT\").splice(0, 1),\r\n            \"format\" : \"text\"\r\n        }\r\n        dbRef.push(message);\r\n        \r\n        translate(this.state.text,this.props.sender,this.props.reciever,this.props.nickname);\r\n\r\n        this.setState({\r\n            text:\"\"\r\n        })\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            text: event.target.value\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"chatFormDiv\">\r\n                <GiphyComponent sender={this.props.sender} reciever={this.props.reciever} chatting={this.props.chatting} />\r\n                <form className=\"chatForm\" action=\"\" onSubmit={this.handleSubmit}>\r\n                    <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\" value={this.state.text} onChange={this.handleChange} disabled={this.props.reciever ? false : true} placeholder={this.props.reciever ? \"Enter text to send\" : \"Please first select a chat\"} required></textarea>\r\n                    <SubmitButton disabled={this.props.reciever ? false : true} label=\"Send\"/>\r\n                </form>\r\n                \r\n\r\n            </div>\r\n\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default ChatForm;","import React from \"react\";\r\nimport noImage from \"./noImage.png\"\r\n\r\n\r\nfunction RecentMessages(props) {\r\n    return (\r\n        <div id=\"recentMessages\" className=\"recentMessagesDiv\">\r\n            <div className=\"chatHeader\">\r\n                {props.userImg\r\n                    ?\r\n                    <img src={props.userImg} alt=\"\" />\r\n                    :\r\n                    <img src={noImage} alt=\"\" />\r\n                }\r\n                    \r\n                {props.chattingWith\r\n                    ?\r\n                    \r\n                    <h2>{props.chattingWith}</h2>\r\n                \r\n                :\r\n                <h2>No chat has been selected!</h2>\r\n\r\n                }\r\n            </div>\r\n            <ul className=\"recentMessages clearfix\">\r\n                {   \r\n                    props.messages.map((message, index) => {\r\n                        return (\r\n                            <li key={index} className={message.type} >\r\n                                <p className=\"time\">{message.time}</p>\r\n                                {message.format === \"text\"\r\n                                    ?\r\n                                    <p className=\"message\">{message.message}</p>\r\n                                    :\r\n                                    <img src={message.message} alt={message.altTag}/>\r\n                                }\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n                \r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RecentMessages;","import React from \"react\";\r\nimport noImage from \"./noImage.png\";\r\n\r\n\r\n\r\nfunction FriendSelector(props) {\r\n\r\n    const setName = function(event){\r\n        props.function(event.currentTarget.value, event.currentTarget.id);\r\n    }\r\n\r\n\r\n    return (\r\n        <li className=\"friendButton\">\r\n            <button onClick={setName} value={props.name} id={props.uid}>\r\n                {props.imgUrl\r\n                    ?\r\n                    <img src={props.imgUrl} alt={`A picture of ${props.name}`}/>\r\n                    :\r\n                <img src={noImage} alt={`The user has no picture`}/>\r\n            } \r\n                <p>{props.name}</p>\r\n            </button>\r\n            <button className=\"deleteButton\" onClick={props.deleteFunction} value={props.index}><i className=\"fas fa-trash-alt\"></i></button>\r\n            \r\n        </li>\r\n    )\r\n}\r\n\r\nexport default FriendSelector;","import React from \"react\";\r\n\r\n\r\n\r\n\r\nfunction AlertMessage(props) {\r\n    \r\n\r\n\r\n    return(\r\n        <div className=\"alert\">\r\n            <h4>{props.title}</h4>\r\n            <p>{props.message}</p>\r\n            <div>\r\n    <button onClick={()=>{props.functionToClose()}}>{props.originalLabel}</button>\r\n                {props.aditionalButton\r\n                    ?\r\n                <button onClick={props.aditionalFunction}>{props.aditionalLabel}</button>\r\n                    :\r\n                    \"\"\r\n                }\r\n            \r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AlertMessage;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"./firebase\";\r\nimport AlertMessage from \"./AlertMessage\";\r\n\r\n\r\nclass AddFriendButton extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            nickname:\"\",\r\n            openedChats: [],\r\n            error: false,\r\n            errorMessage:\"\",\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        // Getting the reference of all the opened chats of the user\r\n        const friendsReference = firebase.database().ref(`${this.props.userId}/chats`)\r\n\r\n        // Seting up listener in order to get any changes on the database of incoming conversations.\r\n\r\n        friendsReference.on(\"value\", (snapshot) => {\r\n            const openedChats = [];\r\n            const openedChatsData = snapshot.val();\r\n            \r\n            for (let chat in openedChatsData) {\r\n            \r\n                openedChats.push(openedChatsData[chat].nickname);\r\n            }\r\n            \r\n            this.setState({\r\n                openedChats:openedChats\r\n            })\r\n\r\n        })\r\n\r\n    }\r\n    \r\n    addFriend = (event) => {\r\n        event.preventDefault()\r\n        \r\n        const usersId = []\r\n\r\n        // Checking if theres no opened conversations opened with that user and that the user isnt trying to start a conversation with itself\r\n        \r\n        if(this.state.openedChats.includes(this.state.nickname) || (this.state.nickname === this.props.userNickname)){\r\n            \r\n            \r\n            this.setState({\r\n                errorMessage: `You already have an opened chat with ${this.state.nickname}`,\r\n                error: true\r\n            });\r\n            \r\n        }else{\r\n\r\n            const databaseRef = firebase.database().ref();\r\n        \r\n            databaseRef.once(\"value\").then((snapshot) => {\r\n                \r\n                const databaseData = snapshot.val()\r\n                const arrayPromises = []\r\n                for (let user in databaseData) {\r\n                    if (user !== \"generalConfig\") {\r\n                        \r\n                        usersId.push(user);\r\n                        const userRef = firebase.database().ref(`${user}/settings/nickname`);\r\n                        arrayPromises.push(userRef.once(\"value\"));\r\n                        \r\n                    }\r\n                }\r\n        \r\n                // Using promise.all to make sure to get all values before doing anything\r\n    \r\n                Promise.all(arrayPromises).then((values) => {\r\n                    let found = false;\r\n                    values.forEach((value, index) => {\r\n                        \r\n                        if (value.val() === this.state.nickname) {\r\n                            found = true;\r\n                            \r\n                            \r\n\r\n                            // If found check th other user doesnt have more than 5 conversations\r\n\r\n                            firebase.database().ref(`${usersId[index]}/chats`).once(\"value\").then((snapshot)=>{\r\n                                const conversationArray = [];\r\n                                const conversationData = snapshot.val();\r\n                                for(let conversation in conversationData){\r\n                                    conversationArray.push(conversation);\r\n                                }\r\n                                if(conversationArray.length <=5){\r\n                                    firebase.database().ref(`${this.props.userId}/chats`).update({\r\n                                        [usersId[index]]: {\r\n                                            nickname: this.state.nickname,\r\n                                            messages:\"\"\r\n                                        }\r\n                                    })\r\n            \r\n                                    firebase.database().ref(`${usersId[index]}/chats`).update({\r\n                                        [this.props.userId]: {\r\n                                            nickname: this.props.userNickname,\r\n                                            messages: \"\"\r\n                                        }\r\n                                    })\r\n\r\n                                }else{\r\n                                    this.setState({\r\n                                        errorMessage: \"The user you are trying to reach has already 5 conversations opened.\",\r\n                                        error: true\r\n                                    });\r\n                                }\r\n                            })\r\n                            \r\n                        } else if (index === (values.length - 1) && !found) {\r\n                           console.log(found)\r\n                            this.setState({\r\n                                errorMessage: `Looks like ${this.state.nickname} doesn't have an account with us!`,\r\n                                error: true\r\n                            });\r\n                        }\r\n                    }) \r\n                }) \r\n            })\r\n        }\r\n    }\r\n    \r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.error\r\n                    ?\r\n                    <AlertMessage title=\"Oops! There is a problem!\" message={this.state.errorMessage} functionToClose={()=>{this.setState({error:false})}} originalLabel=\"Ok\" resend={false}/>\r\n                    :\r\n                    \"\"\r\n                }\r\n                \r\n                <form className=\"addFriendBar\" action=\"\" onSubmit={this.addFriend}>\r\n                    <label htmlFor=\"nickname\">Enter nickname of a friend to start a conversation:</label>\r\n                    <input type=\"text\" id=\"nickname\" placeholder=\"Enter nickname\" value={this.state.nickname} onChange={(e)=>{this.setState({nickname: e.target.value})}} required/>\r\n                    <SubmitButton label=\"Add\" disabled={this.props.disabled} />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default AddFriendButton","import React, { Component } from \"react\";\r\n\r\nimport firebase from \"./firebase\";\r\nimport ChatForm from \"./ChatForm\";\r\nimport RecentMessages from \"./RecentMessages\";\r\nimport FriendSelector from \"./FriendSelector\";\r\nimport AddFriendButton from \"./AddFriendButton\";\r\nimport AlertMessage from \"./AlertMessage\";\r\n\r\n\r\n\r\nclass ChatPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userId: props.userId,\r\n            userNickname: props.name,\r\n            userEmail: null,\r\n            chattingWithName: null,\r\n            chattingWithUid:null,\r\n            languageToTransalte: null,\r\n            friends: [],\r\n            messages: [],\r\n            language: \"\",\r\n            userImg: null,\r\n            deleteConfirmation:false,\r\n            messageToDelete: null\r\n        }\r\n    }\r\n\r\n      \r\n\r\n    componentDidMount() {\r\n\r\n        \r\n        \r\n        if (this.state.chattingWithUid !== null) {\r\n\r\n            const languageReference = firebase.database().ref(`${this.state.chattingWithUid}/settings`);\r\n            languageReference.once(\"value\").then((result) => {\r\n                this.setState({\r\n                    language: result.val().language\r\n                })\r\n            })\r\n        }\r\n\r\n        // Getting the reference of all the opened chats of the user\r\n            const friendsReference = firebase.database().ref(`${this.state.userId}/chats`)\r\n\r\n        // Seting up listener in order to get any changes on the database of incoming conversations.\r\n\r\n            friendsReference.on(\"value\", (snapshot) => {\r\n                \r\n                const openedChatsData = snapshot.val();\r\n                const openedChats = [];\r\n                \r\n                for (let chat in openedChatsData) {\r\n                    \r\n                    openedChats.push({ uid: chat, name: openedChatsData[chat].nickname, });\r\n                }\r\n\r\n                // Look if the opened chat is still opened by the other user\r\n\r\n                let found = false\r\n\r\n                openedChats.forEach((chat) => {\r\n                    if (chat.uid === this.state.chattingWithUid) {\r\n                        found = true;\r\n                    }\r\n                })\r\n\r\n                if (found) {\r\n                    // If it is not opened then just update the conversations that are opened\r\n                    this.setState({\r\n                        friends: openedChats\r\n                    })\r\n                } else {\r\n                    // If its opened then set the chatting with information to null\r\n                    this.setState({\r\n                        friends: openedChats,\r\n                        chattingWithName: null,\r\n                        chattingWithUid: null\r\n                    })\r\n                }\r\n\r\n                \r\n\r\n            })\r\n\r\n        // }\r\n\r\n    }\r\n\r\n    \r\n    \r\n    // Getting the messages between the user and the selected other user.\r\n    select = (name,uid) => {\r\n\r\n        const handle = snapshot => {\r\n            \r\n            const messages = [];\r\n            const messagesData = snapshot.val();\r\n            if(messagesData != null){\r\n                if (!messagesData.length) {\r\n                    for (let message in messagesData) {\r\n                    \r\n                        messages.push(messagesData[message]);\r\n                    } \r\n                } else {\r\n                    messages.push(messagesData);\r\n                }\r\n\r\n                // Check if there are more than 50 messages and only show the last 50 in case there are.\r\n                if (messages.length > 50) {\r\n                    messages = messages.slice(messages.length - 50, messages.length);\r\n                }\r\n\r\n            }\r\n            \r\n\r\n            this.setState({\r\n                userId: this.props.userId,\r\n                userEmail: this.props.userEmail,\r\n                messages: messages,\r\n                chattingWithName: name,\r\n                chattingWithUid: uid,\r\n                language:\"\",\r\n            })\r\n\r\n            // Make the recentMessages div scroll to th bottom when there is a new message in the active conversation\r\n\r\n            const recentMessages = document.querySelector(\".recentMessages\");\r\n            recentMessages.scrollTo({\r\n                top: recentMessages.scrollHeight,\r\n                left: 0,\r\n                behavior: \"smooth\"\r\n            })\r\n            \r\n        }\r\n        \r\n        const dbRef = firebase.database().ref(`${this.state.userId}/chats/${uid}/messages`);\r\n        dbRef.off(\"value\", handle);\r\n        dbRef.on(\"value\", handle);\r\n\r\n        // Making the page scroll when the user selects a conversation\r\n\r\n        document.querySelector(\"#recentMessages\").scrollIntoView({behavior:\"smooth\"});\r\n\r\n        const lastMessage = document.querySelector(\".recentMessages\");\r\n        lastMessage.scrollTo({\r\n            top: lastMessage.scrollHeight,\r\n            left: 0,\r\n            behavior: \"smooth\"\r\n        })\r\n\r\n    }\r\n\r\n    deleteConversation = () => {\r\n        const chattingWithUid = this.state.friends[this.state.messageToDelete].uid;\r\n        \r\n        // Delete thecnversation from both users\r\n\r\n        firebase.database().ref(`${this.state.userId}/chats/${chattingWithUid}`).remove().then(()=>{\r\n            \r\n            \r\n        });\r\n\r\n        firebase.database().ref(`${chattingWithUid}/chats/${this.state.userId}`).remove().then(()=>{\r\n            \r\n        });\r\n\r\n        // We make sure that f the user deleted the conversation that was selected then the \"no chat has been selected message shows\" by changing the state.\r\n\r\n        if (chattingWithUid === this.state.chattingWithUid) {\r\n            this.setState({\r\n                chattingWithName: null,\r\n                chattingWithUid: null,\r\n                deleteConfirmation: false\r\n            })\r\n\r\n        }else{\r\n            this.setState({\r\n                deleteConfirmation: false\r\n            })\r\n        }\r\n    }\r\n    \r\n        \r\n    render() {\r\n        return (\r\n            <div className=\"wrapper\">\r\n                \r\n                \r\n                <div className=\"chatPageContainer\">\r\n\r\n                    \r\n\r\n                    {\r\n                        this.state.deleteConfirmation\r\n                            ?\r\n                            \r\n                            <AlertMessage title=\"Please confirm before proceeding!\" functionToClose={()=>{this.setState({\r\n                                deleteConfirmation:false\r\n                            })\r\n                            }} message=\"Are you sure you want to delete your conversation?\" originalLabel={<i className=\"fas fa-times-circle iconButton deny\" aria-label=\"Deny delete option\"></i>} aditionalButton={true} aditionalFunction={this.deleteConversation} aditionalLabel={<i className=\"fas fa-check-circle accept\" aria-label=\"Confirm delete option\"></i>} />\r\n                            \r\n                            :\r\n\r\n                            \"\"\r\n                    \r\n                    }           \r\n                    \r\n                    \r\n                    <div className=\"listOfFriends\">\r\n                        {/* Only show the add conversation(friend) button if there are less than 5 active conversations */}\r\n                    {this.state.friends.length <= 5\r\n                        ?\r\n                        <AddFriendButton disabled={this.state.userNickname ? false : true} userId={this.state.userId} userNickname={this.state.userNickname} />\r\n                        :\r\n                        null\r\n                        }\r\n                        <ul>\r\n                            {this.state.friends.map((friend, index) => {\r\n                                return (\r\n                                    <FriendSelector key={friend.uid} uid={friend.uid} name={friend.name} imgUrl={friend.imgUrl ? friend.imgUrl : null} userNickname={this.state.userNickname} function={this.select} index={index} deleteFunction={(e)=>{this.setState({\r\n                                        messageToDelete:e.currentTarget.value,\r\n                                        deleteConfirmation:true\r\n                                    })}}/>\r\n                                )\r\n                            })}\r\n\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"messagesAndTextContainer\">\r\n                        \r\n                        <p>{`Welcome`} <span>{this.props.name}</span>{`!`}</p>\r\n                        <p>This is <span className=\"logo\">interpreter!</span> Text messaging without language barrier!</p>\r\n                            \r\n                        \r\n                        <RecentMessages messages={this.state.messages} chattingWith={this.state.chattingWithName} userImg={this.state.userImg} />\r\n                        <ChatForm language={this.state.language} sender={this.state.userId} reciever={this.state.chattingWithUid} nickname={this.state.userNickname} chatting={this.state.chattingWithName?true:false}/>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ChatPage;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\n\r\n\r\n\r\nclass SignInPage extends Component{\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            forgetPassword: false,\r\n            emailToRecover: \"\",\r\n            emailSent: false,\r\n            google: false,\r\n        }\r\n    }\r\n    \r\n    handleChange = (event) => {\r\n        \r\n        this.setState({\r\n            [event.target.id]:event.target.value\r\n        })\r\n    }\r\n\r\n    \r\n    \r\n    signIn = (event) => {\r\n\r\n        event.preventDefault();\r\n\r\n        const functionToCall = this.props.signInAlert;\r\n        \r\n        firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then((result) => {\r\n            const userUid = result.user.uid;\r\n            firebase.database().ref(`${userUid}/settings/language`).once(\"value\").then((snapshot) => {\r\n                this.props.getLanguage(snapshot.val());\r\n            })\r\n            \r\n            \r\n        }).catch(function (error) {\r\n            // In case of an error we call the function that will change the state in the parent to show the alert.\r\n            \r\n            functionToCall();\r\n            \r\n            \r\n        });\r\n    }\r\n\r\n    recoverPassword = (event) => {\r\n\r\n        \r\n\r\n        event.preventDefault();\r\n        firebase.auth().sendPasswordResetEmail(this.state.emailToRecover).then( () => {\r\n            this.setState({\r\n                emailSent: true\r\n            })\r\n            \r\n        })\r\n\r\n    }\r\n\r\n    googleSignIn = () => {\r\n\r\n        const functionToGetUserIsNew = this.props.userIsNewFunction;\r\n        const provider = new firebase.auth.GoogleAuthProvider();\r\n        firebase.auth().signInWithPopup(provider).then(function (result) {\r\n            // This gives you a Google Access Token. You can use it to access the Google API.\r\n\r\n            // The signed-in user info.\r\n            const isUserNew = result.additionalUserInfo.isNewUser;\r\n            \r\n\r\n            functionToGetUserIsNew(isUserNew);\r\n            \r\n        })\r\n    }\r\n\r\n    \r\n    \r\n    render() {\r\n        \r\n        return (\r\n            <div className=\"signIn\">\r\n                <form  action=\"\" onSubmit={this.signIn}>\r\n                    <h2>Sign In</h2>\r\n                    <label htmlFor=\"email\">Enter email</label>\r\n                    <input type=\"email\" id=\"email\" onChange={this.handleChange} value={this.state.email} required />\r\n                    <label htmlFor=\"password\">Enter password</label>\r\n                    <input type=\"password\" id=\"password\" onChange={this.handleChange} value={this.state.password} required/>\r\n                    <SubmitButton label=\"Sign in\" />\r\n                    \r\n                </form>\r\n\r\n                <button onClick={this.googleSignIn}>Google sign in <i className=\"fab fa-google\" aria-hidden={true}></i></button>\r\n\r\n                <button onClick={() => { this.setState({ forgetPassword: !this.state.forgetPassword }) }}>Forgot your password?</button>\r\n\r\n                \r\n                \r\n                {this.state.forgetPassword\r\n                    ?\r\n                    <form className=\"recoverPassword\" action=\"\" onSubmit={this.recoverPassword}>\r\n                        <label htmlFor=\"emailToRecover\">Enter your email:</label>\r\n                        <input type=\"email\" id=\"emailToRecover\" onChange={this.handleChange} required />\r\n                        <SubmitButton label=\"Recover password\" />\r\n                    </form>\r\n                    :\r\n                    \"\"\r\n                }\r\n\r\n                {this.state.emailSent\r\n                    ?\r\n                    <p>An email has been sent with the instructions to recover your password.</p>\r\n                    :\r\n                    \"\"\r\n                }\r\n                \r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\nexport default SignInPage;","import React from \"react\";\r\n\r\n\r\n\r\nfunction LanguageSelector(props){\r\n\r\n    return (\r\n        <div className=\"language\">\r\n            <label htmlFor=\"language\">Select your language:  </label>\r\n            <select name=\"language\" id=\"language\" onChange={props.function} defaultValue=\"en\" required>\r\n                {props.languages.map((language, index) => {\r\n                    return <option key={index} id={language.name} value={language.code} >{language.name} </option>\r\n                })}\r\n            </select>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default LanguageSelector;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport LanguageSelector from \"./LanguageSelector\";\r\n\r\n\r\nclass SignUp extends Component{\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            name: \"\",\r\n            language: \"en\",\r\n            signedUp:false\r\n        }\r\n    }\r\n\r\n    getLanguage = (event) => {\r\n        \r\n        this.setState({\r\n            language: event.target.value,\r\n            \r\n        })\r\n    }\r\n\r\n    \r\n\r\n    createUser = (event) => {\r\n        event.preventDefault();\r\n\r\n        const functionToCallAlert = this.props.signUpAlert;\r\n        const nickname = this.state.name;\r\n        const nicknameFirstFiveLetters = nickname.toLowerCase().substring(0, 5);;\r\n\r\n        if (nicknameFirstFiveLetters === \"guest\") {\r\n            functionToCallAlert();\r\n        } else {\r\n            \r\n            \r\n            const databaseRef = firebase.database().ref();\r\n    \r\n            databaseRef.once(\"value\").then((snapshot) => {\r\n    \r\n                const databaseData = snapshot.val()\r\n                const arrayPromises = []\r\n                for (let user in databaseData) {\r\n                    if (user !== \"generalConfig\") {\r\n    \r\n                        \r\n                        const userRef = firebase.database().ref(`${user}/settings/nickname`);\r\n                        arrayPromises.push(userRef.once(\"value\"));\r\n    \r\n                    }\r\n                }\r\n    \r\n                // Using promise.all to make sure to get all values before doing anything\r\n    \r\n                Promise.all(arrayPromises).then((values) => {\r\n                    const existingNicknames = values.map((item) => {\r\n                        return item.val()\r\n                    });\r\n    \r\n                    if (existingNicknames.includes(nickname)) {\r\n    \r\n                        functionToCallAlert();\r\n                        \r\n                    } else {\r\n                        \r\n                        firebase.auth().createUserWithEmailAndPassword(this.state.email, this.state.password).then((result) => {\r\n                \r\n                            const data = {\r\n                                \r\n                                    \"chats\": false,\r\n                                    \"settings\": {\r\n                                        \"language\": this.state.language,\r\n                                        \"nickname\": this.state.name,\r\n                                        \"email\": this.state.email,\r\n                                    }\r\n                                \r\n                            }\r\n                \r\n                            firebase.database().ref(`${result.user.uid}`).update(data);\r\n                \r\n                            result.user.sendEmailVerification().then(function () {\r\n                                // Email sent.\r\n                                \r\n                            }).catch(function (error) {\r\n                                // An error happened.\r\n                                console.log(error);\r\n                            });\r\n                \r\n                            // update the profile with the nickname selected\r\n                \r\n                            result.user.updateProfile({\r\n                                displayName: this.state.name,\r\n                            })\r\n                \r\n                            \r\n                \r\n                \r\n                        }).catch(function (error) {\r\n                            // Handle Errors here.\r\n                            \r\n                            const errorMessage = error.message;\r\n                            console.log(errorMessage);\r\n                            // ...\r\n                        });\r\n                    }\r\n                })\r\n            })\r\n        }\r\n\r\n    \r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            [event.target.id]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n\r\n            <form className=\"signUp\" action=\"\" onSubmit={this.createUser}>\r\n                <h2>Sign up</h2>\r\n                <label htmlFor=\"name\">Enter nickname</label>\r\n                <input type=\"text\" id=\"name\" maxLength={10} onChange={this.handleChange} value={this.state.name} required />\r\n                <label htmlFor=\"email\">Enter email</label>\r\n                <input type=\"email\" id=\"email\" onChange={this.handleChange} value={this.state.email} required />\r\n                <label htmlFor=\"password\">Enter password</label>\r\n                <input type=\"password\" id=\"password\" minLength={6} onChange={this.handleChange} value={this.state.password} required />\r\n                <LanguageSelector languages={this.props.languages} function={this.getLanguage} />\r\n                <SubmitButton label=\"Sign up\" />\r\n            </form>\r\n        )\r\n    };\r\n\r\n}\r\n\r\n\r\nexport default SignUp;","import React, { Component } from \"react\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\nimport LanguageSelector from \"./LanguageSelector\"\r\n\r\n\r\nclass GuestSignUp extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            name: \"\",\r\n            language: \"en\",\r\n            userId: \"\"\r\n        }\r\n    }\r\n\r\n    signInGuest = (event) => {\r\n        event.preventDefault();\r\n\r\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE)\r\n            .then(() => {\r\n                // Existing and future Auth states are now persisted in the current\r\n                // session only. Closing the window would clear any existing state even\r\n                // if a user forgets to sign out.\r\n                // ...\r\n                // New sign-in will be persisted with session persistence.\r\n                return firebase.auth().signInAnonymously().then((data) => {\r\n                    \r\n                    const userId = data.user.uid;\r\n\r\n                    const guestNumberData = firebase.database().ref(\"/generalConfig\");\r\n                    guestNumberData.once(\"value\").then((value) => {\r\n                        this.setState({\r\n                            \r\n                            userId: userId,\r\n                         \r\n                        })\r\n\r\n                        console.log(value.val().guestNumber);\r\n                  \r\n                        \r\n                        const data = {\r\n\r\n                            \"chats\": false,\r\n                            \"settings\": {\r\n                                \"language\": this.state.language,\r\n                                \"nickname\": `guest${value.val().guestNumber}`,\r\n                                \"email\": null,\r\n                                \"isGuest\": true\r\n                            }\r\n\r\n                        }\r\n\r\n                        firebase.database().ref(`${userId}`).update(data);\r\n\r\n                        \r\n\r\n                    })\r\n\r\n                }).catch(function (error) {\r\n                    // Handle Errors here.\r\n                    \r\n                    const errorMessage = error.message;\r\n                    console.log(errorMessage);\r\n                    // ...\r\n                });\r\n            })\r\n            .catch(function (error) {\r\n                // Handle Errors here.\r\n                \r\n            });\r\n\r\n\r\n        \r\n\r\n       \r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            [event.target.id]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    getLanguage = (event) => {\r\n        console.log(event.target.value);\r\n        this.setState({\r\n            language: event.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <form className=\"guestSignIn\" action=\"\" onSubmit={this.signInGuest}>\r\n                <h2>Sign up as Guest</h2>\r\n                <p>Signing in as a guest means you won't be able to select your nickname and will only be able to  get access to your conversations while logged in. If your refresh the page you will automatically logged out.</p>\r\n                <p>When you log In you will recieve your guest name, use this to connect with other users. </p>\r\n                <LanguageSelector languages={this.props.languages} function={this.getLanguage} />\r\n                <SubmitButton label=\"Sign in\" />\r\n                \r\n            </form>\r\n        )\r\n    };\r\n\r\n}\r\n\r\n\r\nexport default GuestSignUp;","import React from \"react\";\r\nimport firebase from \"firebase\"\r\n\r\nconst signOut = () => {\r\n    firebase.auth().signOut();\r\n}\r\n\r\n\r\n    \r\n\r\n\r\nfunction Header(props) {\r\n\r\n    const callSettings = () => {\r\n        props.onClickFunction()\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <header>\r\n            <div className=\"wrapper\">\r\n                <div className=\"headerMain\">\r\n                    <h1>Interpreter</h1>\r\n                    {props.signedIn\r\n                        ?\r\n                        <nav>\r\n                            <button onClick={signOut}>Sign Out <i className=\"fas fa-sign-out-alt\" aria-hidden={true}></i></button>\r\n                            <button disabled={props.nickname ? false : true} onClick={callSettings}>Settings <i className=\"fas fa-cogs\" aria-hidden={true}></i></button>\r\n                            \r\n                        </nav>\r\n                        :\r\n                        \"\"\r\n                    }\r\n\r\n                </div>\r\n\r\n            </div>\r\n            \r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer>\r\n            <p>Made by Juan Acaiturri Copyright © 2019 powered by Yandex Translate. </p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React, { Component } from \"react\";\r\nimport LanguageSelector from \"./LanguageSelector\";\r\nimport SubmitButton from \"./SubmitButton\";\r\nimport firebase from \"firebase\";\r\n\r\nclass SettingsPage extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            language: \"en\",\r\n            currentLanguage: \"English\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        \r\n        // Getting the user current language when the settings button is clicked\r\n\r\n        firebase.database().ref(`${this.props.userUid}/settings/language`).once(\"value\").then((snapshot) => {\r\n            const currentLanguage = this.props.languages.filter((languageObject) => {\r\n                \r\n                return languageObject.code === snapshot.val()\r\n            })\r\n            console.log(currentLanguage)\r\n            this.setState({\r\n                currentLanguage: currentLanguage[0].name\r\n            })\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    // Event to handle change on the select selection element\r\n\r\n    languagesSelection = (event) => {\r\n        this.setState({\r\n            language: event.target.value\r\n            \r\n        })\r\n        console.log(event.target.value)\r\n    }\r\n\r\n    // Funtion to apply changes to firebase database\r\n\r\n    applyChange = () => {\r\n        firebase.database().ref(`${this.props.userUid}/settings/`).update({\r\n            language: this.state.language\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"settingsPage\">\r\n                <button className=\"close\" onClick={this.props.closeSettings}><i className=\"fas fa-times-circle\" aria-label=\"Close settings\"></i></button>\r\n                <h2>Settings</h2>\r\n                <p>Current language is set to: <span>{ this.state.currentLanguage}</span></p>\r\n                <p>Changing the language won't translate your old messages, only new messages will be recieved in the new selected language.</p>\r\n                <form action=\"\" onSubmit={this.applyChange}>\r\n                    <LanguageSelector function={this.languagesSelection} languages={this.props.languages} />\r\n                    <SubmitButton label=\"Apply change\"/>\r\n                </form>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default SettingsPage","import React from \"react\";\r\n\r\n\r\nfunction Introduction(props) {\r\n    return(\r\n        <div className=\"introduction\">\r\n            \r\n            <p>Welcome to <span className=\"logo\">Interpreter!</span></p>\r\n            <p>The text messaging system where you don't have to worry about speaking the same language to have a conversation with other people!</p>\r\n                    \r\n            <p>Please create an account or sign in as a guest.</p>\r\n    \r\n            <button className=\"submitButton\" onClick={props.functionToClose}>Start!</button>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Introduction","import React, { Component } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport LanguageSelector from \"./LanguageSelector\";\r\nimport SubmitButton from \"./SubmitButton\";\r\n\r\nclass GoogleSignIn extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            nickname: \"\",\r\n            language: \"en\",\r\n\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        // const user = firebase.auth().currentUser;\r\n\r\n    \r\n\r\n        // user.updateProfile({\r\n        //     displayName: \"\",\r\n        // });\r\n    }\r\n\r\n\r\n    setupNicknameAndLanguage = (event) => {\r\n        event.preventDefault();\r\n        console.log(this.props.googleNicknameAlertFunction);\r\n        const functionToCallAlert = this.props.googleNicknameAlertFunction;\r\n        const nickname = this.state.nickname;\r\n        const nicknameFirstFiveLetters = nickname.toLowerCase().substring(0, 5);;\r\n        const language = this.state.language;\r\n\r\n        const user = firebase.auth().currentUser;\r\n\r\n        const updateNicknameFunction = this.props.updateNickname;\r\n\r\n\r\n        if (nicknameFirstFiveLetters === \"guest\") {\r\n            functionToCallAlert();\r\n        } else {\r\n\r\n\r\n            const databaseRef = firebase.database().ref();\r\n\r\n            databaseRef.once(\"value\").then((snapshot) => {\r\n\r\n                const databaseData = snapshot.val()\r\n                const arrayPromises = []\r\n                for (let user in databaseData) {\r\n                    if (user !== \"generalConfig\") {\r\n\r\n\r\n                        const userRef = firebase.database().ref(`${user}/settings/nickname`);\r\n                        arrayPromises.push(userRef.once(\"value\"));\r\n\r\n                    }\r\n                }\r\n\r\n                // Using promise.all to make sure to get all values before doing anything\r\n\r\n                Promise.all(arrayPromises).then((values) => {\r\n                    const existingNicknames = values.map((item) => {\r\n                        return item.val()\r\n                    });\r\n\r\n                    console.log(existingNicknames);\r\n\r\n                    if (existingNicknames.includes(nickname)) {\r\n\r\n                        functionToCallAlert();\r\n\r\n                    } else {\r\n\r\n                        \r\n                        const data = {\r\n\r\n                            \"chats\": false,\r\n                            \"settings\": {\r\n                                \"language\": language,\r\n                                \"nickname\": nickname,\r\n                                \"email\": user.email,\r\n                            }\r\n\r\n                        }\r\n\r\n                        firebase.database().ref(`${user.uid}`).update(data);\r\n\r\n                        user.updateProfile({\r\n                            displayName: nickname,\r\n                        })\r\n\r\n                        \r\n\r\n                        this.setState({\r\n                            nickname:nickname\r\n                        },() => {\r\n                                updateNicknameFunction(nickname);\r\n                                setTimeout(() => {\r\n                                    window.location.reload();\r\n                                }, 1000);\r\n                             \r\n                            }\r\n                        )\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"googleSignIn\">\r\n                <h3>Google Sign In</h3>\r\n                <form action=\"\" onSubmit={this.setupNicknameAndLanguage}>\r\n                    <p>Please fill the following form in order to continue:</p>\r\n                    <label htmlFor=\"nickname\">Enter a nickname: </label>\r\n                    <input maxLength={10} type=\"text\" id=\"nickname\" value={this.state.nickname} onChange={(e)=>{this.setState({nickname:e.target.value})}} required />\r\n                    <LanguageSelector languages={this.props.languages} function={(e) => { this.setState({ language: e.target.value }) }} />\r\n                    <SubmitButton label=\"Save settings\"/>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GoogleSignIn;","import React, { Component } from 'react';\nimport './App.css';\nimport firebase from \"./firebase\";\nimport axios from \"axios\";\nimport ChatPage from \"./ChatPage\";\nimport SignInPage from \"./SignInPage\";\nimport SignUp from './SignUp';\nimport GuestSignUp from './GuestSignIn';\nimport AlertMessage from \"./AlertMessage\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport SettingsPage from \"./SettingsPage\";\nimport Introduction from \"./Introduction\";\nimport GoogleSignIn from \"./GoogleSignIn\";\n\n\n\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      signedIn: false,\n      userId: null,\n      userEmail: null,\n      name: null,\n      language: null,\n      verified: null,\n      optionSelected: \"signIn\",\n      languagesList: [\"english\"],\n      settingsStatus: false,\n      signInAlert: false,\n      verifyAlert: false,\n      introduction: \"\",\n      nicknameAlert: false,\n      userIsNew: false\n    }\n  }\n\n  \n\n  componentDidMount() {\n    \n    firebase.auth().onAuthStateChanged((user) => {\n      // console.log(user.displayName);\n\n      if (user && this.state.userIsNew) {\n        \n        user.updateProfile({\n          displayName: \"\",\n        });\n\n        this.setState({\n          name: null,\n          signedIn: true,\n          email: user.email,\n          userId: user.uid,\n\n        })\n\n      }else if (user && user.emailVerified) {\n        \n        this.setState({\n          signedIn: true,\n          userId: user.uid,\n          name: user.displayName,\n          email: user.email,\n          language: \"\"\n        })\n        \n      \n        \n\n      \n      \n      }else if (user && !user.emailVerified && user.email) {\n        this.setState({\n          verifyAlert: true\n        })\n        // In case the user sign in as guest\n      } else if (user && user.isAnonymous) {\n        const guestNumberData = firebase.database().ref(\"/generalConfig\");\n        \n        guestNumberData.once(\"value\").then((snapshot) => {\n          this.setState({\n            signedIn: true,\n            userId: user.uid,\n            email: null,\n            name: `guest${snapshot.val().guestNumber}`\n          })\n\n          guestNumberData.update({\n            guestNumber: snapshot.val().guestNumber + 1\n          });\n          \n        });\n        \n        \n\n\n      } else {\n        \n        this.setState({\n          signedIn: false,\n          userId: null,\n          introduction: true\n        })\n      }\n    })\n\n    // Making a call to the API to get all the available languages\n\n    axios({\n      method: \"get\",\n      url: \"https://translate.yandex.net/api/v1.5/tr.json/getLangs\",\n      responseType: \"json\",\n      params: {\n        key: \"trnsl.1.1.20191120T174117Z.30abf07a083257c3.606e1a38fc565562205063e541cb970657ab2600\",\n        ui: \"en\"\n      }\n    }).then((data) => {\n      \n      const languageObject = data.data.langs;\n      let languagesList = [];\n    \n\n      // Making an array that will store in objecs both the language code and language name\n\n      for (let lang in languageObject) {\n        languagesList.push({\n          name: languageObject[lang],\n          code: lang\n        })\n\n      }\n\n      // We sort the lanugauges to order them in alphabetical order\n      \n\n      languagesList = languagesList.sort(function (a, b) {\n        return ((a.name < b.name) ? -1 : ((a.name === b.name) ? 0 : 1));\n      });\n\n      // Storing the list of available lenguages in state and rerendering to show the options to the user\n      this.setState({\n        languagesList: languagesList,\n\n      })\n    })\n    \n  }\n\n  getLanguage = (language) => {\n    this.setState({\n      language: language\n    })\n  }\n\n  \n  render() {\n\n    return (\n      \n      <React.Fragment>\n\n        <Header nickname={this.state.name} signedIn={this.state.signedIn} onClickFunction={() => {\n          this.setState({ settingsStatus: !this.state.settingsStatus })}} />\n\n        <main>\n\n          <div className=\"wrapper\">\n\n            <div className=\"mainDiv\">\n\n              {this.state.introduction\n                ?\n                <Introduction functionToClose={() => { this.setState({ introduction: false }) }} />\n                :\n                \"\"\n\n              }\n\n              {this.state.nicknameAlert\n                ?\n                <AlertMessage title=\"Oops! there was a problem!\" functionToClose={() => { this.setState({ nicknameAlert: false }) }} message=\"The nickname you are trying to register is already in used or is invalid! please try a different nickname\" aditionalButton={false} originalLabel=\"Ok\" />\n                :\n                \"\"\n              }\n\n              {(this.state.userIsNew || this.state.name === null) && this.state.signedIn\n                ?\n                <GoogleSignIn googleNicknameAlertFunction={() => {\n                  this.setState({\n                    nicknameAlert: true\n                  })}} userUid={this.state.userId} updateNickname={(nickname) => { this.setState({name:nickname})}} userEmail={this.state.userEmail} languages={this.state.languagesList} />\n                :\n                \"\"\n              }\n              \n              {this.state.signedIn\n                ?\n                <ChatPage userId={this.state.userId} name={this.state.name} language={this.state.language} friendsVisible={this.state.friendsVisible}/>\n                :\n                <div className=\"options\">\n\n                  {this.state.verifyAlert\n                    ?\n                    <AlertMessage title=\"An email has been sent to you!\" functionToClose={() => { window.location.reload() }}message=\"Please verify your acount and refresh after! You should have recieved an email with the steps to follow!\" originalLabel=\"Ok\" aditionalButton={false} aditionalFunction={()=>{firebase.auth().currentUser.sendEmailVerification()}} aditionallabel=\"Resend email\" />\n                    :\n                    \"\"\n                  }\n\n\n                  {this.state.signInAlert\n                    ?\n                    <AlertMessage title=\"Oops! there was a problem!\" functionToClose={()=>{this.setState({signInAlert:false})}} message=\"You have entered an incorrect email or password!\" aditionalButton={false} originalLabel=\"Ok\" />\n                    :\n                    \"\"\n                  }\n\n                  <div className=\"optionsButtons\">\n                    <button onClick={(e) => this.setState({ optionSelected: e.target.value })} value=\"signIn\" className={this.state.optionSelected === \"signIn\" ? \"\" : \"inactive\"} disabled={this.state.optionSelected === \"signIn\" ? true : false}>Sign In</button>\n                    <button onClick={(e) => this.setState({ optionSelected: e.target.value })} value=\"signUp\" className={this.state.optionSelected === \"signUp\" ? \"\" : \"inactive\"} disabled={this.state.optionSelected === \"signUp\" ? true : false}>Sign Up</button>\n                    <button onClick={(e) => this.setState({ optionSelected: e.target.value })} value=\"guestSignIn\" className={this.state.optionSelected === \"guestSignIn\" ? \"\" : \"inactive\"} disabled={this.state.optionSelected === \"guestSignIn\" ? true : false}>Guest Sign In</button>\n                  </div>\n\n                  {this.state.optionSelected === \"signIn\"\n                    ?\n                    <SignInPage userIsNewFunction={(trueOrFalse) => { this.setState({ userIsNew: trueOrFalse }) }}  languages={this.state.languagesList} getLanguage={this.getLanguage} signInAlert={()=>{this.setState({\n                      signInAlert:true\n                    })}} />\n                    :\n                    this.state.optionSelected === \"signUp\"\n                      ?\n                      <SignUp function={this.getLanguage} languages={this.state.languagesList} signUpAlert={() => {\n                        this.setState({\n                          nicknameAlert: true\n                        })\n                      }}/>\n                      :\n                      <GuestSignUp languages={this.state.languagesList} />\n\n                  }\n\n                </div>\n              }\n                    \n              {this.state.settingsStatus && this.state.signedIn\n                ?\n                <SettingsPage userUid={this.state.userId} languages={this.state.languagesList} currentLanguage={this.state.language} closeSettings={() => {\n                  this.setState({ settingsStatus: !this.state.settingsStatus })\n                }}/>\n                :\n                \"\"\n              }\n            </div>\n\n          </div>\n\n        </main>\n\n        <Footer/>\n      \n      </React.Fragment>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}